<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Development - Developer Guide</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../css/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Style Guide", url: "#_top", children: [
          ]},
          {title: "Prerequisites", url: "#prerequisites", children: [
          ]},
          {title: "Debugging Javascript unit tests", url: "#debugging-javascript-unit-tests", children: [
              {title: "Disabling a unit test temporarily", url: "#disabling-a-unit-test-temporarily" },
              {title: "Running a single unit test", url: "#running-a-single-unit-test" },
              {title: "Triggering a browser debugging session", url: "#triggering-a-browser-debugging-session" },
          ]},
          {title: "Live working with a running Opencast", url: "#live-working-with-a-running-opencast", children: [
          ]},
          {title: "Live working with a Mockup", url: "#live-working-with-a-mockup", children: [
          ]},
          {title: "Update Node Dependencies", url: "#update-node-dependencies", children: [
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../javascript/extra.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="style/index.html" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="style/index.html" class="btn btn-xs btn-link">
        Overview
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../index.html" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../index.html" class="btn btn-xs btn-link">
        Overview
      </a>
    </div>
    
  </div>

    

    <h2 id="style-guide">Style Guide</h2>
<p>The style guide defines a set of guidelines that the design follows to maintain a consistent look and feel.
It is defined to be flexible, easy to update and consistent. Before delving deeper into the UI or
developing additional features we recommend familiarizing yourself with some of the items.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>For admin interface development, it may come handy to run npm or grunt from the command line. For that, you can either
install those tools globally on your machine, or use the versions Opencast installs locally when building via Maven. If
you want to do that, you may want to add the installation folders to your path variable:</p>
<pre><code class="language-bash">cd modules/admin-ui-frontend
export PATH=node:node_modules/.bin:$PATH
</code></pre>
<h2 id="debugging-javascript-unit-tests">Debugging Javascript unit tests</h2>
<p>Our Javascript unit tests are built in <a href="http://jasmine.github.io/">Jasmine</a> (a behavior-driven development framework for
testing JavaScript code), and live in <code>modules/admin-ui-frontend/test/test/unit</code>.</p>
<p>Occasionally something breaks, or you need to disable or focus on a single test.
While reading the Jasmine, Karma and Grunt docs are encouraged, here are a
few common recipes that might be useful:</p>
<h3 id="disabling-a-unit-test-temporarily">Disabling a unit test temporarily</h3>
<p>Add <code>x</code> to the broken test. For example:</p>
<table>
<thead>
<tr>
<th>Before</th>
<th>After</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>it('runs a test', function () {</code></td>
<td><code><strong style="color:#000">x</strong>it('runs a test', function () {</code></td>
</tr>
</tbody>
</table>
<h3 id="running-a-single-unit-test">Running a single unit test</h3>
<p>Add <code>f</code> (for focus) to the relevant test.  For example:</p>
<table>
<thead>
<tr>
<th>Before</th>
<th>After</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>it('runs a test', function () {</code></td>
<td><code><strong style="color:#000">f</strong>it('runs a test', function () {</code></td>
</tr>
</tbody>
</table>
<h3 id="triggering-a-browser-debugging-session">Triggering a browser debugging session</h3>
<p>This triggers an instance of the selected browser(s) to open and begin running
the tests.  There will be a <code>Debug</code> button which will open another tab where the JavaScript has not been minified,
 use this second tab for debugging. Refreshing the debugging page will rerun the tests.</p>
<p>To run Karma</p>
<ul>
<li>
<p><span style="display:inline-block; width:70px;">Chrome</span>
<code>npm run test-chrome</code></p>
</li>
<li>
<p><span style="display:inline-block; width:70px;">Firefox</span>
<code>npm run test-firefox</code></p>
</li>
<li>
<p><span style="display:inline-block; width:70px;">IE</span>
<code>npm run test-ie</code></p>
</li>
</ul>
<p>Additional browsers are supported, the full list can be found at <a href="https://karma-runner.github.io/1.0/config/browsers.html">https://karma-runner.github.io/</a>.</p>
<h2 id="live-working-with-a-running-opencast">Live working with a running Opencast</h2>
<p>In order to speed up the UI development process, you can test the code without
building the module with Maven. There is a Grunt task for starting a standalone web server offering the UI from
the source and a separate task that will monitoring any change to the Sass, JavaScript and HTML files and reload the
page dynamically.</p>
<p><em>Be warned that some functionality in this live setup can be limited.
Before reporting an issue, please test if you can reproduced the issue with a built Opencast.</em></p>
<p>This setup may be configured as follows:</p>
<ol>
<li>
<p>Follow the instructions in the Prerequisites section.</p>
</li>
<li>
<p>Start your Opencast instance.</p>
</li>
<li>
<p>Change to the Admin UI module directory.</p>
<pre><code>cd modules/admin-ui-frontend
</code></pre>
</li>
<li>
<p>Install project dependencies.</p>
<pre><code>npm install &amp;&amp; bower install
</code></pre>
</li>
<li>
<p>Start the standalone web server by running:</p>
<pre><code>grunt proxy --proxy.host=http://localhost:8080 --proxy.username=opencast_system_account --proxy.password=CHANGE_ME
</code></pre>
</li>
</ol>
<p><em>Note: host, username and password have to match your configuration <code>../etc/custom.properties</code></em></p>
<p>Grunt should print out the <a href="http://localhost:9000">URL</a> where you can see the standalone page running
from source.</p>
<pre><code>Started connect web server on http://localhost:9000
</code></pre>
<p>To run the watcher that updates the displayed page dynamically, run in the same folder:</p>
<pre><code>grunt watch
</code></pre>
<p>Which should then display:</p>
<pre><code>Running &quot;watch&quot; task
Waiting...
</code></pre>
<p>The watch process monitors the <code>js</code>,<code>scss</code> and <code>sass</code> files for changes and should dynamically reload the page.</p>
<p><em>Note: A refresh of the page might be required to start the live reload script</em></p>
<h2 id="live-working-with-a-mockup">Live working with a Mockup</h2>
<p>If you do not want to keep a running Opencast instance for developing the
Admin UI NG, you can start a mockup.</p>
<p><em>Be warned that <strong>a lot</strong> of this mockup's functionality acts very differently from
an actual Opencast instance</em></p>
<p>This setup may be configured as follows:</p>
<ol>
<li>
<p>Follow the instructions in the Prerequisites section.</p>
</li>
<li>
<p>Change to the Admin UI module directory.</p>
<pre><code>cd modules/admin-ui-frontend
</code></pre>
</li>
<li>
<p>Install project dependencies.</p>
<pre><code>npm install &amp;&amp; bower install
</code></pre>
</li>
<li>
<p>Start the mockup webserver by running:</p>
<pre><code>grunt serve
</code></pre>
</li>
</ol>
<p>Grunt should print out the <a href="http://localhost:9000">URL</a> where you can see the standalone page running
from source.</p>
<pre><code>Started connect web server on http://localhost:9000
</code></pre>
<p>If you make changes to the Admin UI NG source files, the page should auto reload to display the changes.</p>
<h2 id="update-node-dependencies">Update Node Dependencies</h2>
<p>Installing <code>npm-check-updates</code> and running it at the start of developing / improving a component can ensure that the
node modules stays up-to-date and dependency bugs are reduced.</p>
<p><em>Note: Test the build (<code>mvn install</code>, <code>npm install</code>, <code>grunt</code>) thoroughly when upgrading modules as this might cause some
unexpected build failures (resetting the grunt version to "grunt": "^0.4.0" might resolve some of the initial issues).</em></p>
<ol>
<li>
<p>Installation.</p>
<pre><code>npm install -g npm-check-updates
</code></pre>
</li>
<li>
<p>Show any new dependencies for the project in the current directory.</p>
<pre><code>ncu
</code></pre>
</li>
<li>
<p>Upgrade a project's package file.</p>
<pre><code>ncu -u
</code></pre>
</li>
</ol>
<p>A detailed reference of the command-line tool can be found at
<a href="https://www.npmjs.com/package/npm-check-updates">https://www.npmjs.com/package/npm-check-updates</a>.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="style/index.html" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="style/index.html" class="btn btn-xs btn-link">
        Overview
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../index.html" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../index.html" class="btn btn-xs btn-link">
        Overview
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
      <p>
        <a href="https://github.com/opencast/opencast/edit/develop/docs/guides/developer/docs/modules/admin-ui/development.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>