<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Development process - Developer Guide</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../css/extra.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Development Process", url: "#_top", children: [
              {title: "Contributing Code", url: "#contributing-code" },
              {title: "Git Repository Branching Model", url: "#git-repository-branching-model" },
              {title: "Release Process", url: "#release-process" },
              {title: "Quality Assurance", url: "#quality-assurance" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="../../javascript/extra.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../committer/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../committer/" class="btn btn-xs btn-link">
        Committers
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../.." class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../.." class="btn btn-xs btn-link">
        Home
      </a>
    </div>
    
  </div>

    

    <h1 id="development-process">Development Process</h1>
<div class="toc">
<ul>
<li><a href="#development-process">Development Process</a><ul>
<li><a href="#contributing-code">Contributing Code</a><ul>
<li><a href="#github">GitHub</a></li>
<li><a href="#acceptance-criteria-for-patches-in-different-versions">Acceptance Criteria for Patches in Different Versions</a></li>
<li><a href="#reviews">Reviews</a><ul>
<li><a href="#pull-request-guidelines">Pull Request Guidelines</a></li>
<li><a href="#merging-pull-requests">Merging Pull Requests</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#git-repository-branching-model">Git Repository Branching Model</a></li>
<li><a href="#release-process">Release Process</a><ul>
<li><a href="#preparations">Preparations</a><ul>
<li><a href="#release-schedule">Release Schedule</a></li>
</ul>
</li>
<li><a href="#release-branch">Release Branch</a></li>
<li><a href="#tags">Tags</a></li>
<li><a href="#maintenance-releases">Maintenance Releases</a></li>
</ul>
</li>
<li><a href="#quality-assurance">Quality Assurance</a><ul>
<li><a href="#reporting-bugs">Reporting Bugs</a><ul>
<li><a href="#security-issues">Security Issues</a></li>
</ul>
</li>
<li><a href="#unit-tests">Unit Tests</a></li>
<li><a href="#user-tests">User Tests</a></li>
<li><a href="#test-server">Test Server</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>This document defines rules and recommendations for Opencast development. In particular, it defines how patches can be
contributed, how they are merged and how releases are done.</p>
<p><em>If this document does not answer all of your questions, here is how you can get further help:</em></p>
<ul>
<li><em>Ask on the <a href="https://groups.google.com/a/opencast.org/forum/#!forum/dev">Opencast Development List</a></em></li>
<li><em>Chat with developers on <a href="https://app.element.io/#/room/#opencast-community:matrix.org">Matrix (#opencast-community)</a></em></li>
<li><em>Join our weekly technical meeting (see lists or Matrix)</em></li>
</ul>
<h2 id="contributing-code">Contributing Code</h2>
<p>Opencast sources can be found on <a href="https://github.com/opencast">GitHub</a>. The easiest way to contribute code to the
project is by creating a pull request against the project's official repository. More details about the structure of
this repository are explained later in this guide.</p>
<h3 id="github">GitHub</h3>
<ul>
<li>
<p>Opencast uses <a href="https://github.com/opencast/opencast/issues">GitHub</a> for tracking issues. Each pull request should be
  accompanied by a ticket in GitHub unless it is a very small fix. The issue identifier should also be in the
  description of the pull request, which will automatically close the issue (if any) when the PR is merged.  See
  <a href="https://help.github.com/en/articles/closing-issues-using-keywords">here</a> for more details. Creating a GitHub issue
  is usually the first step when fixing something.</p>
</li>
<li>
<p>Opencast uses <a href="https://github.com/opencast">GitHub</a> for code hosting. Please
  <a href="https://help.github.com/articles/fork-a-repo/">fork</a> the <a href="https://github.com/opencast/opencast">official repository</a>
  on GitHub to <a href="https://help.github.com/articles/creating-a-pull-request/">create pull requests</a> from your repository
  which will show up on the project's list of open pull requests.</p>
</li>
</ul>
<h3 id="acceptance-criteria-for-patches-in-different-versions">Acceptance Criteria for Patches in Different Versions</h3>
<p>Updates between minor versions should be as smooth as possible and should usually not need manual intervention.
That is why patches may only be accepted into releases branches (<code>r/?.x</code>) if they meet the following criteria:</p>
<ul>
<li>Patches must not modify existing database tables</li>
<li>Patches must not modify the indexes or otherwise cause re-indexing</li>
<li>Patches must not modify existing translation keys</li>
<li>Patches must work with the same configuration within a major version</li>
</ul>
<p>Patches which do not meet these criteria should target the branch <code>develop</code> to become part of the next major version.</p>
<p>Note: Patches adding features should target the current stable release (<code>r/{{ opencast_major_version }}.x</code>), or
<code>develop</code>, and are strongly discouraged from targetting the legacy release.  Features going into the legacy release
will need a good reason, and must be highly self contained.</p>
<p>To determine the acceptance of patches, all pull requests will be discussed in the technical meeting.
This protects against inclusion of controversial changes with no broader consent among committers.</p>
<h3 id="reviews">Reviews</h3>
<p>Before a patch is merged, it needs to be reviewed. The reviewer tries to make sure that the patch merges without
conflicts, that it works as expected and that it does not break anything else.</p>
<p>If the reviewer discovers any kind of issue, he should comment on the pull request in GitHub, so that the author can
fix the problem.</p>
<h4 id="pull-request-guidelines">Pull Request Guidelines</h4>
<p>When reviewing a pull request, it is always easier if the reviewer knows what the ticket is about, and has a rough idea
of what work has been done. To this end, there are a few expectations for all pull requests:</p>
<ul>
<li>The GitHub issue  title should match the pull request title</li>
<li>The pull request description should contain a summary of the work done, along with reasoning for any major change<ul>
<li>The GitHub issue should contain the same information</li>
</ul>
</li>
<li>Pull request should include appropriate documentation</li>
<li>The pull request should have a clean commit history</li>
<li>In the case of major user interface changes, it is good practice to include screenshots of the change</li>
<li>Any actions that would be required for a version upgrade (e.g: from 3.x to 4.x) must be documented in
  <code>docs/guides/admin/docs/upgrade.md</code></li>
<li>New features require a release note in <code>docs/guides/admin/releasenotes</code> of at least one line describing the change</li>
<li>The commands <code>mvn clean install</code>, <code>mvn javadoc:javadoc javadoc:aggregate</code>, and <code>mvn site</code> should all succeed</li>
<li>The licenses of any external libraries used in the pull request comply with the <a href="../../license/">licensing rules</a> both
  in terms of the license itself as well as its listing in NOTICES</li>
</ul>
<p>Some changes require special attention:</p>
<table>
<thead>
<tr>
<th align="left">Folder</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">etc/listproviders</td>
<td>Changes here might need to be reflected in the static mockup data for the Admin UI facade found in modules/admin-ui/src/test/resources/app/admin-ng/resources</td>
</tr>
<tr>
<td align="left">modules/admin-ui/src/main/java</td>
<td>In case the interface of the Admin UI facade changes, those changes need to be also reflected in the static mockup data for the Admin UI facade found in modules/admin-ui/src/test/resources/app.</td>
</tr>
</tbody>
</table>
<p>While a committer may accept a patch even if it does not meet these expectations, it is encouraged that anyone filing
a pull request ensures that they meet these expectations.</p>
<h4 id="merging-pull-requests">Merging Pull Requests</h4>
<p>After a pull request has received at least one approving review and passes the automated tests, it is ready for merging.
Only a committer can perform a merge, so if a reviewed pull request has not yet received attention from a committer
feel free to contact one.</p>
<p>There are a couple of rules that committers must follow when merging pull requests. These are:
* A pull request requires at least one approving review before merging.
    * More reviews are always welcome.
* A pull request must be approved at the weekly technical meeting before merging (visit https://docs.opencast.org/ for
the time and place of the technical meeting).
* Reviewing or merging your own pull requests is strongly discouraged, but technically allowed.
    * It is advised to be pragmatic and only do so if necessary.</p>
<h2 id="git-repository-branching-model">Git Repository Branching Model</h2>
<p>While the Opencast repository and branching model is inspired by
<a href="http://nvie.com/posts/a-successful-git-branching-model/">GitFlow</a>, there have been some distinct changes to how release
branches are used and releases are tagged. The purpose of this is mainly to support multiple, simultaneous versions and
maintenance releases.</p>
<p>Swift overview:</p>
<ul>
<li>The <code>develop</code> branch represents the latest state of development. Features may be merged into this branch and into
  this branch only. Release branches are branched off from <code>develop</code>. It is basically the preparation for the next big
  release at all times.</li>
<li>The release branches are named <code>r/&lt;a&gt;.x</code> (e.g. <code>r/6.x</code>). They are the latest state of development for a specific
  major version.  All minor releases are created from these branches.  The branches live on as long as there may be
  additional maintenance releases for a given version.</li>
<li>Git tags in the form of <code>a.b</code> are created to indicate official releases.</li>
</ul>
<p>To get a closer look at the branching model, let us consider a simple example with a single release:</p>
<p><img alt="Git branching model with a single versions" src="../../img/git-branching-model-simple.svg" /></p>
<p>As described above, <code>develop</code> is the branch used for preparing the next version. At some point marked in the release
schedule, the release branch is cut from <code>develop</code>. This action also marks the feature freeze for that version since
features may be merged only into the <code>develop</code> branch.</p>
<p>After the release branch is cut, the development on the <code>develop</code> branch may continue as before. Features can (and
should) be merged without waiting for the next version to be released. Thus, the creation of a release branch also marks
the beginning of the development for the next version.</p>
<p>In contrast to that, only bug fixes may be merged into the release branch. This branch should be tested with care, so
that bugs can be identified and fixed before the release.</p>
<p>During the whole process the release manager will regularly merge back the release branch into <code>develop</code> or, if
existent, the next active release branch.</p>
<p>The releases themselves are not part of the release branch. Instead, the release manager branches off, makes the
necessary changes to the pom files (and possibly the UI) and creates a separately tagged commit.</p>
<p>Finally, after a release is done, more bug fixes may be added to the release branch. The release manager should identify
if there are enough commits to be put into a maintenance release.</p>
<p>Even after an Opencast version has been released, more bugs may be found and fixes for them merged into the release
branch. When the release manager considers that the number or importance of such bug fixes is sufficient, he may decide
to create a new maintenance release. The version <code>6.1</code> above is an example of that.</p>
<p>With Opencast supporting two major releases, you may find not one, but up to three active release branches.</p>
<p><img alt="Git branching model with two versions" src="../../img/git-branching-model-two-versions.svg" /></p>
<p>Mostly, this is just the same as the simpler model from before. The branches exist separately from each other and only
interact through merges from older to newer versions so that bug fixes from a release branch will automatically become
part of the next Opencast versions (and <code>develop</code>), without having to create additional pull requests.</p>
<p>For example, a pull request may be merged into <code>r/7.x</code>, <code>r/7.x</code> will then be merged into <code>develop</code> or, if it already
exists, <code>r/8.x</code> and from there into <code>develop</code>. That way patches bubble through all newer versions and finally end up in
<code>develop</code>.</p>
<h2 id="release-process">Release Process</h2>
<p>As indicated above, the release cycle of a new Opencast version starts when a release branch is cut. Patches merged into
<code>develop</code> after the cut will be part of the next version, but not the one just cut.</p>
<p>This is why the position of release manager for the next Opencast version should be assigned at this point. The current
release manager should therefore ask for volunteers in the mailing lists. For more details about the rights and
responsibilities of a release manager, please have a look at the <a href="../release-manager/">Release Manager Guide</a>.</p>
<h3 id="preparations">Preparations</h3>
<p>The first phase of the release consists of adding new features and defining the release schedule. It is the duty of the
release manager to orchestrate this. This does not necessarily mean that release managers merge or review pull requests,
but that they talk to developers and ensure the merge process is driven forward.</p>
<h4 id="release-schedule">Release Schedule</h4>
<p>Releases should happen twice a year, usually within a time span of 9.5 months between the cut of the previous release
branch and the final release. The release manager should create a release schedule as soon as possible, identifying when
the release branch is cut and when the final release will happen. Additionally, he should coordinate with the QA manager
to identify phases for internal and public testing.</p>
<p>Usually, a release schedule will look like this:</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Phase</th>
</tr>
</thead>
<tbody>
<tr>
<td>May 15th</td>
<td>Feature Freeze</td>
</tr>
<tr>
<td>May 24th</td>
<td>Translation week</td>
</tr>
<tr>
<td>May 31st</td>
<td>Public QA phase</td>
</tr>
<tr>
<td>June 15th</td>
<td>Release of Opencast 7.0</td>
</tr>
</tbody>
</table>
<h3 id="release-branch">Release Branch</h3>
<p>The release branch is created from <code>develop</code>. The release branch is named <code>r/A.x</code> (e.g. <code>r/7.x</code>) to indicate that it is
the origin of all releases with the major version of <code>A</code>. The creation of the release branch marks the feature freeze
for a given version, as no more features can be merged into a release branch.</p>
<p>To ensure that all fixes that go into the release branch will become part of <code>develop</code> (and thus part of the next version
of Opencast) with a minimum amount of work, the release manager will merge the release branch into <code>develop</code> on a
regular basis. He may request assistance from certain developers in case of merge conflicts. This process continues until
the next release branch is cut.</p>
<h3 id="tags">Tags</h3>
<p>Git tags are used to mark Opencast releases. Here is how a release looks like in the history:</p>
<p><img alt="Opencast version tag in git" src="../../img/git-version-tag.svg" /></p>
<p>To create a version based on a given state of the release branch (commit <code>A</code>), the release manager will branch off from
this commit, make the necessary version changes to all <code>pom.xml</code> files and create a commit which is then finally tagged.
This tag is then pushed to the community repository.</p>
<p>For more details about how to create a release, have a look at the <a href="../release-manager/">Release Manager Guide</a>.</p>
<h3 id="maintenance-releases">Maintenance Releases</h3>
<p>After a final release, additional issues may show up. These issues may be fixed on the ongoing release branch and at
some point released as maintenance release.</p>
<p>Maintenance releases will be cut monthly for the latest stable release. For legacy releases, it is up to the release
manager to decide when it is worthwhile to make the cut.</p>
<h2 id="quality-assurance">Quality Assurance</h2>
<p>As any piece of software, Opencast may contain bugs. It is the duty of the whole community to identify these bugs,
report them and possibly fix them to improve Opencast as product.</p>
<p>Additionally, before releasing a new version of Opencast, the current release manager and quality assurance manager will
coordinate test phases dedicated to new releases in order to identify possible problems ahead of time. The whole
community will be requested to participate in this testing.</p>
<h3 id="reporting-bugs">Reporting Bugs</h3>
<p>If you identify any bugs, please <a href="https://github.com/opencast/opencast/issues">report them on Github</a>!. Please make
sure to  describe in detail how to reproduce the problem, and which version of Opencast you are experiencing the issue
on.</p>
<h4 id="security-issues">Security Issues</h4>
<p>If you discover a problem that has severe implications for system security, please do not publish this information on
list. Instead, send a report of the problem to <em>security@opencast.org</em>. The message will be forwarded to the private
committers list, where the issue will be discussed. Once a patch for the problem is ready, a security notice will be
released along with it.</p>
<h3 id="unit-tests">Unit Tests</h3>
<p>All Opencast modules should have built-in unit tests to check that they are actually doing what they are supposed to do
and that code patches do not break the existing functionality. These tests are automatically run whenever the project is
built. If building repeatedly fails due to test failures, then something is most likely wrong. Please report this as a
severe bug.</p>
<h3 id="user-tests">User Tests</h3>
<p>Before each major release, the release and quality assurance managers will ask the whole community to participate in
the execution of a set of manual tests. These tests are designed to check that important functionalities of Opencast
work as expected even if users are in slightly different environments or choose different methods to achieve a certain
goal.</p>
<p>Such a call for participation will usually be raised both on the lists, the technical and the adopters meeting.  If it
is possible for you to participate, please do so. Identifying possible problems early will immensely benefit the release
process.</p>
<h3 id="test-server">Test Server</h3>
<p>Some institutions provide public testing infrastructure for Opencast. Use them to try out the most recent development
version of Opencast. They are meant for testing. Do not fear to break them. They are meant for testing.</p>
<p>For a list of test servers, take a look at the <a href="../infrastructure/">infrastructure documentation</a>.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../committer/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../committer/" class="btn btn-xs btn-link">
        Committers
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../.." class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../.." class="btn btn-xs btn-link">
        Home
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
      <p>
        <a href="https://github.com/opencast/opencast/edit/develop/docs/guides/developer/docs/participate/development-process.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>